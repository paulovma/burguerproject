!function(){angular.module("burguerapp",["angular-storage","ui.router","ngRoute","checklist-model"]).config(["$httpProvider",function(o){o.interceptors.push("APIInterceptor")}]).config(["$stateProvider",function(o){o.state("index",{url:"/",controller:"LoginController",templateUrl:"/view/login/login.html"})}])}(),function(){var o=["$rootScope","UserService",function(o,e){var a=this;a.request=function(o){var a=e.getUser();return a&&(o.headers.Authorization=a.token),o},a.responseError=function(e){return 401==e.status&&o.$broadcast("unauthorized"),e}}];angular.module("burguerapp").service("APIInterceptor",o)}(),function(){var o=["$scope","LoginService","UserService","$state","$location",function(o,e,a,r,n){console.log("oi"),o.isRotaLogin=!0;var i={usuario:"TESTE",senha:"123"};o.logar=function(){console.log("OI"),e.logar(i).then(function(e){console.log(e),e.data?(console.log(e.data.token),a.setUser(e.data),o.isRotaLogin=!1,r.go("realizarpedido")):console.log("Not permited")})}}];angular.module("burguerapp").controller("LoginController",o)}(),function(){var o=["$stateProvider",function(o){o.state("login",{url:"/",controller:"LoginController",template:"<ui-view/>"}).state("login.index",{url:"/login",controller:"LoginController",templateUrl:"view/login/login.html"})}];angular.module("burguerapp").config(o)}(),function(){var o=["$http",function(o){return{logar:function(e){console.log("SIM");return o({url:"/login/verificaLogin",method:"POST",data:e})}}}];angular.module("burguerapp").factory("LoginService",o)}(),function(){var o=["$scope","RealizarPedidoService",function(o,e){function a(){return console.log(o.nomeCliente&&o.enderecoCliente),o.nomeCliente&&o.enderecoCliente}function r(e,a){e.length>0&&angular.forEach(e,function(e,r){a?o.valorLanche+=e.valor:o.valorLanche-=e.valor})}function n(){var e=0;angular.forEach(o.pedidos,function(o,a){e+=o.valor}),o.valorTotal=e}function i(e){o.saladaChecked=!1,angular.forEach(o.listSalada,function(a,r){a.checked=!1,e.id==a.id&&(o.saladaChecked=!0,a.checked=!0)})}function l(){o.valorLanche=(o.pedido.recheio?o.pedido.recheio.valor:0)+(o.pedido.tipoPao?o.pedido.tipoPao.valor:0)+(o.pedido.queijo?o.pedido.queijo.valor:0)+t(o.listSalada)+d(o.pedido.molhos)+c(o.pedido.temperos)}function t(e){var a=0;return angular.forEach(e,function(e,r){e.checked&&(a+=o.dobraSalada?2*e.valor:e.valor)}),a}function d(e){var a=0;return angular.forEach(e,function(e,r){a+=o.dobraMolho?2*e.valor:e.valor}),a}function c(e){var a=0;return angular.forEach(e,function(e,r){a+=o.dobraTempero?2*e.valor:e.valor}),a}function u(){o.dobraMolho=!1,o.dobraTempero=!1,o.dobraSalada=!1,o.pedido={descricao:"",tipoPao:"",queijo:"",recheio:"",salada:null,temperos:[],molhos:[]}}o.pedidos=[],function(){e.recuperaValoresIniciais().then(function(e){o.listLanche=e.data.lanches,o.listTipoPao=e.data.tiposPao,o.listQueijo=e.data.queijos,o.listRecheio=e.data.recheios,o.listSalada=e.data.saladas,o.listTempero=e.data.temperos,o.listMolho=e.data.molhos})}(),u(),o.valorLanche=0,o.pedidoRealizado=!1,o.checkItem=function(o,e){o.checked=e,l()},o.checkSalada=function(o){i(o),l()},o.setLancheNaTela=function(){o.pedido=null,o.pedido=angular.copy(o.lanche),console.log(o.lanche),console.log(o.pedido),o.pedido?(i(o.lanche.salada),l()):o.valorLanche=0},o.somatorioLanche=function(){l()},o.adicionarPedido=function(){o.pedido.valor=o.valorLanche,o.pedido.dobraSalada=o.dobraSalada,o.pedido.dobraMolho=o.dobraTempero,o.pedido.dobraTempero=o.dobraMolho,o.valorLanche=0,o.pedidos.push(o.pedido),u(),n()},o.dobrarMolho=function(){r(angular.copy(o.pedido.molhos),o.dobraMolho)},o.dobrarTempero=function(){r(o.pedido.temperos,o.dobraTempero)},o.dobrarSalada=function(){angular.forEach(o.listSalada,function(e,a){e.checked&&(o.dobraSalada?o.valorLanche+=e.valor:o.valorLanche-=e.valor)})},o.retirarPedido=function(e){o.pedidos.pop(e),n()},o.finalizarPedido=function(){if(a()){o.camposObrigatoriosNaoPreenchidos=!1;var r={pedidos:angular.copy(o.pedidos),valorTotal:angular.copy(o.valorTotal),nomePedido:angular.copy(o.nomeCliente),enderecoPedido:angular.copy(o.enderecoCliente)};console.log(r),e.finalizarPedido(r).then(function(e){o.pedidoRealizado=!0,o.pedidos=[],o.valorTotal=0})}else o.camposObrigatoriosNaoPreenchidos=!0}}];angular.module("burguerapp").controller("RealizarPedidoController",o)}(),function(){var o=["$stateProvider",function(o){o.state("realizarpedido",{url:"/realizarpedido",controller:"RealizarPedidoController",templateUrl:"view/realizarpedido/realizarpedido.html"})}];angular.module("burguerapp").config(o)}(),function(){var o=["$http",function(o){return{recuperaValoresIniciais:function(){return o.get("api/realizarpedido/recuperavaloresiniciais")},finalizarPedido:function(e){return o.post("api/realizarpedido/finalizarpedido",e)}}}];angular.module("burguerapp").factory("RealizarPedidoService",o)}(),function(){var o=["store",function(o){var e=this,a=null;e.setUser=function(e){return a=e,o.set("user",e),a},e.getUser=function(){return a||(a=o.get("user")),a}}];angular.module("burguerapp").service("UserService",o)}();