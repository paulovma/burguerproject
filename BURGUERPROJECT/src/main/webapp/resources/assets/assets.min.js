!function(){angular.module("burguerapp",["angular-storage","ui.router","ngRoute","checklist-model"]).config(["$httpProvider",function(o){o.interceptors.push("APIInterceptor")}])}(),function(){var o=["$rootScope","UserService",function(o,a){var e=this;e.request=function(o){var e=a.getUser();return e&&(o.headers.Authorization=e.token),o},e.responseError=function(a){return 401==a.status&&o.$broadcast("unauthorized"),a}}];angular.module("burguerapp").service("APIInterceptor",o)}(),function(){var o=["$scope","LoginService","UserService","$state","$location",function(o,a,e,r,n){o.isRotaLogin=!0,o.logar=function(){var n=angular.copy(o.login);a.logar(n).then(function(a){console.log(a),200==a.status&&a.data?(e.setUser(a.data),o.isRotaLogin=!1,r.go("realizarpedido")):o.notLogged=!0})}}];angular.module("burguerapp").controller("LoginController",o)}(),function(){var o=["$stateProvider",function(o){o.state("index",{url:"/",controller:"LoginController",templateUrl:"/view/login/login.html"})}];angular.module("burguerapp").config(o)}(),function(){var o=["$http",function(o){return{logar:function(a){console.log("SIM");return o({url:"/login/verificaLogin",method:"POST",data:a})}}}];angular.module("burguerapp").factory("LoginService",o)}(),function(){var o=["$scope","RealizarPedidoService",function(o,a){function e(){return console.log(o.nomeCliente&&o.enderecoCliente),o.nomeCliente&&o.enderecoCliente}function r(a,e){a.length>0&&angular.forEach(a,function(a,r){e?o.valorLanche+=a.valor:o.valorLanche-=a.valor})}function n(){var a=0;angular.forEach(o.pedidos,function(o,e){a+=o.valor}),o.valorTotal=a}function i(a){o.saladaChecked=!1,angular.forEach(o.listSalada,function(e,r){e.checked=!1,a.id==e.id&&(o.saladaChecked=!0,e.checked=!0)})}function l(){o.valorLanche=(o.pedido.recheio?o.pedido.recheio.valor:0)+(o.pedido.tipoPao?o.pedido.tipoPao.valor:0)+(o.pedido.queijo?o.pedido.queijo.valor:0)+t(o.listSalada)+d(o.pedido.molhos)+c(o.pedido.temperos)}function t(a){var e=0;return angular.forEach(a,function(a,r){a.checked&&(e+=o.dobraSalada?2*a.valor:a.valor)}),e}function d(a){var e=0;return angular.forEach(a,function(a,r){e+=o.dobraMolho?2*a.valor:a.valor}),e}function c(a){var e=0;return angular.forEach(a,function(a,r){e+=o.dobraTempero?2*a.valor:a.valor}),e}function u(){o.dobraMolho=!1,o.dobraTempero=!1,o.dobraSalada=!1,o.pedido={descricao:"",tipoPao:"",queijo:"",recheio:"",salada:null,temperos:[],molhos:[]}}o.pedidos=[],function(){a.recuperaValoresIniciais().then(function(a){o.listLanche=a.data.lanches,o.listTipoPao=a.data.tiposPao,o.listQueijo=a.data.queijos,o.listRecheio=a.data.recheios,o.listSalada=a.data.saladas,o.listTempero=a.data.temperos,o.listMolho=a.data.molhos})}(),u(),o.valorLanche=0,o.pedidoRealizado=!1,o.checkItem=function(o,a){o.checked=a,l()},o.checkSalada=function(o){i(o),l()},o.setLancheNaTela=function(){o.pedido=null,o.pedido=angular.copy(o.lanche),console.log(o.lanche),console.log(o.pedido),o.pedido?(i(o.lanche.salada),l()):o.valorLanche=0},o.somatorioLanche=function(){l()},o.adicionarPedido=function(){o.pedido.valor=o.valorLanche,o.pedido.dobraSalada=o.dobraSalada,o.pedido.dobraMolho=o.dobraTempero,o.pedido.dobraTempero=o.dobraMolho,o.valorLanche=0,o.pedidos.push(o.pedido),u(),n()},o.dobrarMolho=function(){r(angular.copy(o.pedido.molhos),o.dobraMolho)},o.dobrarTempero=function(){r(o.pedido.temperos,o.dobraTempero)},o.dobrarSalada=function(){angular.forEach(o.listSalada,function(a,e){a.checked&&(o.dobraSalada?o.valorLanche+=a.valor:o.valorLanche-=a.valor)})},o.retirarPedido=function(a){o.pedidos.pop(a),n()},o.finalizarPedido=function(){if(e()){o.camposObrigatoriosNaoPreenchidos=!1;var r={pedidos:angular.copy(o.pedidos),valorTotal:angular.copy(o.valorTotal),nomePedido:angular.copy(o.nomeCliente),enderecoPedido:angular.copy(o.enderecoCliente)};console.log(r),a.finalizarPedido(r).then(function(a){o.pedidoRealizado=!0,o.pedidos=[],o.valorTotal=0})}else o.camposObrigatoriosNaoPreenchidos=!0}}];angular.module("burguerapp").controller("RealizarPedidoController",o)}(),function(){var o=["$stateProvider",function(o){o.state("realizarpedido",{url:"/realizarpedido",controller:"RealizarPedidoController",templateUrl:"view/realizarpedido/realizarpedido.html"})}];angular.module("burguerapp").config(o)}(),function(){var o=["$http",function(o){return{recuperaValoresIniciais:function(){return o.get("api/realizarpedido/recuperavaloresiniciais")},finalizarPedido:function(a){return o.post("api/realizarpedido/finalizarpedido",a)}}}];angular.module("burguerapp").factory("RealizarPedidoService",o)}(),function(){var o=["store",function(o){var a=this,e=null;a.setUser=function(a){return e=a,o.set("user",a),e},a.getUser=function(){return e||(e=o.get("user")),e}}];angular.module("burguerapp").service("UserService",o)}();